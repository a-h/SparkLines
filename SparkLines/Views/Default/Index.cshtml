@{
    ViewBag.Title = "Index";
}

<h2>Realtime Sparklines with SignalR</h2>

<div><span id="sparklineSignalR">&nbsp;</span> Noise Value</div>

<div id="timeStamp"></div>

<!--Reference the autogenerated SignalR hub script. -->
<script src="/signalr/hubs"></script>
<!--Add script to update the page and send messages.-->
<script type="text/javascript">
    $(function () {
        // Declare a proxy to reference the hub.
        var chat = $.connection.sparklinesHub;
        // Create a function that the hub can call to broadcast messages.
        chat.client.metricsUpdated = function (name, values, timeStamp) {
            $("#sparklineSignalR").sparkline(values, {
                type: 'line'
            });

            $("#timeStamp").text(timeStamp);
        };

        $.connection.hub.start();
    });
</script>